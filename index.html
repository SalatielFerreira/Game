<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Game - Palavra Secreta</title>
    <link rel="icon" type="image/png" href="logo.png">
    <!-- Adicionado para melhor compatibilidade PWA no iOS -->
    <link rel="apple-touch-icon" href="logo.png">
    
    <link rel="stylesheet" href="style.css">

    <!-- Configura√ß√µes PWA / Web App Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Palavra Secreta">
    <meta name="theme-color" content="#c9b458"> <!-- Cor principal do seu tema -->
</head>

<body onload="carregarDados()">

    <div id="menu-inicial">
        <div class="menu-card">
            <h1 class="menu-title">PALAVRA<br><span>SECRETA</span></h1>
            
            <p style="font-size: 0.7rem; font-weight: bold; color: #888; margin-bottom: 5px; text-transform: uppercase;">Dificuldade</p>
            <div class="dificuldade-selector">
                <button class="btn-dif" id="dif-facil" onclick="setDificuldade(10, this)">F√ÅCIL</button>
                <button class="btn-dif active" id="dif-normal" onclick="setDificuldade(6, this)">NORMAL</button>
                <button class="btn-dif" id="dif-dificil" onclick="setDificuldade(4, this)">DIF√çCIL</button>
            </div>

            <button class="btn-jogar" onclick="startGame()">JOGAR AGORA</button>
        </div>
    </div>

    <div id="modal-confirm">
        <div class="modal-content">
            <h3 id="modal-title">Novo Jogo</h3>
            <p id="modal-text">Isso limpar√° seu hist√≥rico, pontos e combo!</p>
            <div style="display:flex; gap:10px; justify-content:center; margin-top:15px;">
                <!-- O onclick √© atribu√≠do via JS agora -->
                <button id="modal-confirm-btn" style="background: var(--cor-primaria); color:#ececec; padding:10px 20px; border:none; border-radius:5px; cursor:pointer;">Confirmar</button>
                <button onclick="fecharModal()" style="padding:10px 20px; border:none; border-radius:5px; cursor:pointer; background:#d1d1d1;">Cancelar</button>
            </div>
        </div>
    </div>

    <div class="header-container">
        <div id="status-bar">
            <div>üïí <span id="timer">00:00</span></div>
            <div>Pontos üèÜ <span id="score">0</span></div>
            <div>üî• <span id="streak">0</span></div>
        </div>
        <div id="settings-container">
            <!-- Cor do √≠cone de configura√ß√µes ajustada para melhor contraste -->
            <button onclick="toggleSettings()" style="background:none; border:none; font-size:1.6rem; cursor:pointer; padding:0; color:#333;">‚öôÔ∏è</button>
            <div id="settings-menu">
                <button onclick="abrirModalReset()"><h3>üîÑ Novo Jogo</h3></button>
                <button onclick="abrirModalVoltar()"><h3>‚¨ÖÔ∏è Menu Inicial</h3></button>
            </div>
        </div>
    </div>

    <div id="message"></div>

    <div class="game-wrapper">
        <div id="game-board"></div>
        <div class="final-actions">
            <button id="btn-next" class="btn-final" style="background:var(--cor-correta);" onclick="proximaPalavra()">PR√ìXIMA PALAVRA</button>
            <button id="btn-lose-menu" class="btn-final" style="background:var(--cor-perigo);" onclick="voltarAoMenu()">VOLTAR AO MENU</button>
        </div>
        <div id="historico-lateral">
            <h3 style="margin-top:0; font-size:0.9rem; text-align:center; border-bottom:1px solid #d1d1d1;">HIST√ìRICO</h3>
            <div id="lista-historico"></div>
        </div>
    </div>

    <div id="keyboard"></div>

    <script src="script.js"></script>
    <script>
        // Registro do Service Worker para PWA (para funcionar offline e ser instal√°vel)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // O caminho do service worker deve ser relativo √† raiz do site
                // Para GitHub Pages, se o projeto estiver em https://usuario.github.io/repositorio/
                // o service worker estaria em https://usuario.github.io/repositorio/service-worker.js
                // O prefixo '/' garante que ele seja buscado a partir da raiz do *dom√≠nio* do site.
                // Se for um repo como "meu-jogo", o caminho seria "/meu-jogo/service-worker.js"
                // Mas o GitHub Pages trata a raiz do repo como "/" para o PWA, ent√£o "/service-worker.js" √© o caminho correto.
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.error('Falha ao registrar ServiceWorker:', error);
                    });
            });
        }
    </script>
</body>
</html>
